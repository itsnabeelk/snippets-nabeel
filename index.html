<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Language</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

    <div class="country-selector">
        <div class="container">
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <div class="dropdown-center">
                        <button class="btn-drop-lng" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <div class="country-flag">
                                <img id="selected-flag" src="assets/img/flags/saudi.png" alt="flag">
                                <span id="selected-country-code">+966</span>
                                <img src="assets/img/icons/down-arrow.png" class="arrow-down-fix" alt="down-arrow">
                            </div>
                        </button>
                        <ul class="dropdown-menu">
                            <li>
                                <a class="dropdown-item country-code" href="#"
                                    onclick="updateSelectedCountry('assets/img/flags/saudi.png', 'Saudi Arabia +966')">
                                    <img src="assets/img/flags/saudi.png" alt="">
                                    Saudi Arabia <span>+966</span>
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item country-code" href="#"
                                    onclick="updateSelectedCountry('assets/img/flags/bahrain.png', 'Bahrain +973')">
                                    <img src="assets/img/flags/bahrain.png" alt="">
                                    Bahrain<span>+973</span>
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item country-code" href="#"
                                    onclick="updateSelectedCountry('assets/img/flags/qatar.png', 'Qatar +974')">
                                    <img src="assets/img/flags/qatar.png" alt="">
                                    Qatar <span>+974</span>
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item country-code" href="#"
                                    onclick="updateSelectedCountry('assets/img/flags/uae.png', 'UAE +971')">
                                    <img src="assets/img/flags/uae.png" alt="">
                                    UAE<span>+971</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </span>
                <input type="text" class="form-control" placeholder="Server" aria-label="Server">
            </div>
        </div>
    </div>
    
    <script>
        function updateSelectedCountry(flagSrc, countryCode) {
            // Update the image source with the selected country's flag
            document.getElementById('selected-flag').src = flagSrc;
    
            // Extract the country code from the countryCode string
            var countryCodeText = countryCode.substring(countryCode.lastIndexOf(' ') + 1);
    
            // Update the text with the selected country's code
            document.getElementById('selected-country-code').textContent = countryCodeText;
    
            // Store the selected flag source and country code in localStorage
            localStorage.setItem('selectedFlagSrc', flagSrc);
            localStorage.setItem('selectedCountryCode', countryCodeText);
        }
    
        window.onload = function() {
            // Retrieve the selected flag source and country code from localStorage
            var selectedFlagSrc = localStorage.getItem('selectedFlagSrc');
            var selectedCountryCode = localStorage.getItem('selectedCountryCode');
    
            // If the values are present, update the elements on the page
            if (selectedFlagSrc && selectedCountryCode) {
                document.getElementById('selected-flag').src = selectedFlagSrc;
                document.getElementById('selected-country-code').textContent = selectedCountryCode;
            }
        };
    </script>

    <script src="assets/js/jquery-3.6.0.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
</body>

</html>